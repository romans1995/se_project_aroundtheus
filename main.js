(()=>{"use strict";var e={};function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.p="";const r=function(){function e(n,r){var o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._inputSelector=n.inputSelector,this._submitButtonSelector=n.submitButtonSelector,this._inactiveButtonClass=n.inactiveButtonClass,this._inputErrorClass=n.inputErrorClass,this._errorClass=n.errorClass,this._form=r,this._inputs=function(e){if(Array.isArray(e))return t(e)}(o=this._form.querySelectorAll(this._inputSelector))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(o)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),this._button=this._form.querySelector(this._submitButtonSelector)}var r,o;return r=e,(o=[{key:"_hideInputError",value:function(e){var t=this._form.querySelector("#"+e.id+"-error");t.textContent="",t.classList.remove(this._errorClass)}},{key:"_showInputError",value:function(e){var t=this._form.querySelector("#"+e.id+"-error");t.textContent=e.validationMessage,t.classList.add(this._errorClass)}},{key:"_checkInputValidity",value:function(e){e.checkValidity()?this._hideInputError(e):this._showInputError(e,this._form)}},{key:"isFormValid",value:function(){return this._inputs.every((function(e){return!0===e.validity.valid}))}},{key:"toggleButton",value:function(){this.isFormValid()?this._button.removeAttribute("disabled"):this._button.disabled=!0}},{key:"_setEventListeners",value:function(){var e=this;this.toggleButton(this._inputs),this._inputs.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e.toggleButton(t)}))}))}},{key:"enableValidation",value:function(){this._form.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners(this._form)}}])&&n(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const i=function(){function e(t,n,r){var o=r.handleClickCard;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._element=t,this._name=t.name,this._link=t.link,this._cardSelector=n,this._handleClickCard=o}var t,n;return t=e,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".element").cloneNode(!0)}},{key:"_seteventListeners",value:function(){var e=this;this._elementImage.addEventListener("click",(function(){e._handleClickCard(e._link,e._name)})),this._likeBtn.addEventListener("click",(function(t){e._toggleLike(t)})),this._deleteBtn.addEventListener("click",(function(t){e._handleElmentRemove(t)}))}},{key:"_toggleLike",value:function(e){e.target.classList.toggle("element__like-button_active")}},{key:"_handleElmentRemove",value:function(){this._element.remove()}},{key:"addElment",value:function(){return this._element=this._getTemplate(),this._elementImage=this._element.querySelector(".element__image"),this._likeBtn=this._element.querySelector(".element__like-button"),this._deleteBtn=this._element.querySelector(".element__delete-button"),this._title=this._element.querySelector(".element__title").textContent=this._name,this._elementImage.alt=this._name,this._elementImage.src=this._link,this._seteventListeners(),this._element}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const c=function(){function e(t,n){var r=t.renderer,o=t.items;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._items=o,this._renderer=r,this._container=n}var t,n;return t=e,(n=[{key:"renderItems",value:function(){var e=this;this._items.forEach((function(t){e._renderer(t)}))}},{key:"addItem",value:function(e){this._container.prepend(e)}}])&&u(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),l(this,"_handleEscClose",(function(e){"Escape"===e.key&&n.close()})),l(this,"_closePopupOnRemoteClick",(function(e){e.target.classList.contains("popup")&&n.close()})),this._popupElement=document.querySelector(t),this.close=this.close.bind(this)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popupElement.classList.add("popup_active"),document.addEventListener("keydown",this._handleEscClose),document.addEventListener("mousedown",this._closePopupOnRemoteClick)}},{key:"close",value:function(){this._popupElement.classList.remove("popup_active"),document.removeEventListener("keydown",this._handleEscClose),document.removeEventListener("mousedown",this._closePopupOnRemoteClick)}},{key:"setEventListener",value:function(){var e=this;this._popupElement.addEventListener("click",(function(t){t.target.classList.contains("popup__close-btn")&&e.close()}))}}])&&a(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function h(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){return d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=_(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},d.apply(this,arguments)}function _(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=v(r);if(o){var n=v(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return h(this,e)});function u(e,t){var n,r,o,c,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),a=function(){d((n=m(r),v(u.prototype)),"close",n).call(n),r._form.reset()},(c="close")in(o=m(r=i.call(this,e)))?Object.defineProperty(o,c,{value:a,enumerable:!0,configurable:!0,writable:!0}):o[c]=a,r._form=r._popupElement.querySelector(".popup__inputs-container"),r.submitHandler=t,r.formSelector=e,r.formInputValues={},r._inputList=r._popupElement.querySelectorAll(".popup__input"),r}return t=u,(n=[{key:"_getInputValues",value:function(){var e=this;return this._inputList.forEach((function(t){e.formInputValues[t.name]=t.value})),this.formInputValues}},{key:"setEventListeners",value:function(){var e=this;this._form.addEventListener("submit",(function(t){t.preventDefault();var n=e._getInputValues();e.submitHandler(n),e.close()})),d(v(u.prototype),"setEventListener",this).call(this)}},{key:"setInputValues",value:function(e){this._inputList.forEach((function(t){t.value=e[t.name]}))}}])&&f(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(s);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(){return E="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=k(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},E.apply(this,arguments)}function k(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=j(e)););return e}function S(e,t){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},S(e,t)}function O(e,t){if(t&&("object"===g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function j(e){return j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},j(e)}var C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=j(r);if(o){var n=j(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return O(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e)).imageElment=t._popupElement.querySelector(".popup__image"),t._imageCaption=t._popupElement.querySelector(".popup__caption"),t}return t=u,(n=[{key:"open",value:function(e,t){this.imageElment.src=e,this._imageCaption.textContent=t,this.imageElment.alt="a nice view of a ".concat(t),E(j(u.prototype),"open",this).call(this)}}])&&w(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(s);function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var L=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._userName=document.querySelector(t),this._userJob=document.querySelector(n)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._userName.textContent,title:this._userJob.textContent}}},{key:"setUserInfo",value:function(e,t){this._userName.textContent=e,this._userJob.textContent=t}}])&&P(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();const I=e.p+"c75819857ff1599f0c50.svg",q=e.p+"5fa4ff08da722d75cea6.jpg";var R=fetch("https://around.nomoreparties.co/v1/cohort-3-en/cards",{headers:{authorization:"bc512917-6cb4-408b-9fef-08d285de7af3","content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return console.log(e)})),B=document.querySelector(".popup__inputs-type-name"),T=document.querySelector(".popup__inputs-type-description"),V=document.querySelector(".popup__inputs-container"),x=document.querySelector(".popup__inputs-container-addPlace"),A=document.querySelector(".profile__edit"),D=document.querySelector(".profile__add"),N=document.querySelector(".elements").querySelector(".elements__list"),U=document.querySelector(".header__logo"),J=document.querySelector(".profile__img"),F={inputSelector:".popup__input",submitButtonSelector:".popup__submit-button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input-error",errorClass:"popup__error_visible"};U.src=I,J.src=q,console.log(R);var H=new L(".profile__description-name",".profile__description-prof"),M=new r(F,V),z=new r(F,x),$=new b(".profile-popup",(function(e){H.setUserInfo(e.name,e.job)}));$.setEventListeners();var G=new C(".popup_image-prev");G.setEventListener();var K=new b(".popup-addElement",(function(e){var t={name:"".concat(e.placeName),link:"".concat(e.placeLink)};W.addItem(Q(t))}));K.setEventListeners(),M.enableValidation(),z.enableValidation();var Q=function(e){return new i(e,".element-Stracture",{handleClickCard:function(){G.open(e.link,e.name)}}).addElment()};A.addEventListener("click",(function(){$.open();var e=H.getUserInfo();B.value=e.name,T.value=e.title})),D.addEventListener("click",(function(){K.open(),z.toggleButton()}));var W=new c({renderer:function(e){var t=Q(e);W.addItem(t)},items:R},N);W.renderItems()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFLbUMsRUQ5QkwscUJDOEI0QixDQUN6Q2hDLGdCQUFpQixXQUNiNEYsRUFBa0JVLEtBQUt0RSxFQUFRM0IsS0FBTTJCLEVBQVE3QixLQUNoRCxJQUNGb0csV0FFTixFQVVEekIsRUFBYXRGLGlCQUFpQixTQXZDVixXQUNoQmlHLEVBQWlCYSxPQUNqQixJQUFNRSxFQUFXbEIsRUFBU21CLGNBQzFCL0IsRUFBVXhCLE1BQVFzRCxFQUFTckcsS0FDM0J3RSxFQUFXekIsTUFBUXNELEVBQVMxQyxLQUUvQixJQWtDRGlCLEVBQVl2RixpQkFBaUIsU0FoRVAsV0FDbEJzRyxFQUFjUSxPQUNkZCxFQUFpQmxHLGNBQ3BCLElBK0RELElBQU00RyxFQUFVLElBQUkxRSxFQUFRLENBQ3BCRSxTQVpZLFNBQUNNLEdBQ2pCLElBQU0wRSxFQUFPTixFQUFXcEUsR0FDeEJrRSxFQUFRQyxRQUFRTyxFQUNuQixFQVVPL0UsTUFBT3FDLEdBRVhnQixHQUVKa0IsRUFBUVMsYSIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYl9wcm9qZWN0XzQvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC93ZWJwYWNrL3J1bnRpbWUvcHVibGljUGF0aCIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiOyIsImNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gICAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm1FbGVtZW50KSB7XHJcblxyXG4gICAgICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBzZXR0aW5ncy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3I7XHJcbiAgICAgICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICAgICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBzZXR0aW5ncy5lcnJvckNsYXNzO1xyXG5cclxuICAgICAgICB0aGlzLl9mb3JtID0gZm9ybUVsZW1lbnQ7XHJcbiAgICAgICAgdGhpcy5faW5wdXRzID0gWy4uLnRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKV07XHJcbiAgICAgICAgdGhpcy5fYnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuXHJcbiAgICB9XHJcbiAgICBfaGlkZUlucHV0RXJyb3IoaW5wdXQpIHtcclxuICAgICAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXCIjXCIgKyBpbnB1dC5pZCArIFwiLWVycm9yXCIpO1xyXG4gICAgICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICAgICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgICB9XHJcbiAgICBfc2hvd0lucHV0RXJyb3IoaW5wdXQpIHtcclxuICAgICAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXCIjXCIgKyBpbnB1dC5pZCArIFwiLWVycm9yXCIpO1xyXG4gICAgICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0LnZhbGlkYXRpb25NZXNzYWdlO1xyXG4gICAgICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gICAgfVxyXG4gICAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dCkge1xyXG4gICAgICAgIGlmIChpbnB1dC5jaGVja1ZhbGlkaXR5KCkpIHtcclxuICAgICAgICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0LCB0aGlzLl9mb3JtKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaXNGb3JtVmFsaWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lucHV0cy5ldmVyeSgoaW5wdXQpID0+IGlucHV0LnZhbGlkaXR5LnZhbGlkID09PSB0cnVlKTtcclxuICAgIH1cclxuXHJcbiAgICB0b2dnbGVCdXR0b24oKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNGb3JtVmFsaWQoKSkge1xyXG4gICAgICAgICAgICB0aGlzLl9idXR0b24ucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fYnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uKHRoaXMuX2lucHV0cyk7XHJcbiAgICAgICAgdGhpcy5faW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyBjaGVjayB2YWxpZGl0eVxyXG4gICAgICAgICAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0KTtcclxuICAgICAgICAgICAgICAgIC8vIHRvZ2dsZSB0aGUgYnV0dG9uXHJcbiAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvbihpbnB1dCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICAgICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycyh0aGlzLl9mb3JtKTtcclxuICAgIH1cclxufVxyXG5leHBvcnQgZGVmYXVsdCBGb3JtVmFsaWRhdG9yOyIsImNsYXNzIENhcmQge1xyXG4gICAgY29uc3RydWN0b3IoZGF0YSwgY2FyZFNlbGVjdG9yLCB7IGhhbmRsZUNsaWNrQ2FyZCB9KSB7XHJcbiAgICAgICAgdGhpcy5fZWxlbWVudCA9IGRhdGE7XHJcbiAgICAgICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcclxuICAgICAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xyXG4gICAgICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICAgICAgICB0aGlzLl9oYW5kbGVDbGlja0NhcmQgPSBoYW5kbGVDbGlja0NhcmQ7XHJcblxyXG4gICAgfVxyXG4gICAgX2dldFRlbXBsYXRlKCkge1xyXG5cclxuICAgICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKS5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudFwiKS5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICAgICAgcmV0dXJuIGNhcmRFbGVtZW50O1xyXG4gICAgfVxyXG4gICAgX3NldGV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgICAgIHRoaXMuX2VsZW1lbnRJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4geyB0aGlzLl9oYW5kbGVDbGlja0NhcmQodGhpcy5fbGluaywgdGhpcy5fbmFtZSkgfSk7XHJcbiAgICAgICAgdGhpcy5fbGlrZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4geyB0aGlzLl90b2dnbGVMaWtlKGV2dCkgfSk7XHJcbiAgICAgICAgdGhpcy5fZGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7IHRoaXMuX2hhbmRsZUVsbWVudFJlbW92ZShldnQpIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIF90b2dnbGVMaWtlKGV2dCkge1xyXG4gICAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LnRvZ2dsZShcImVsZW1lbnRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcclxuICAgIH1cclxuXHJcbiAgICBfaGFuZGxlRWxtZW50UmVtb3ZlKCkge1xyXG4gICAgICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkRWxtZW50KCkge1xyXG4gICAgICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgICAgIHRoaXMuX2VsZW1lbnRJbWFnZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19pbWFnZVwiKTtcclxuICAgICAgICB0aGlzLl9saWtlQnRuID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2xpa2UtYnV0dG9uXCIpO1xyXG4gICAgICAgIHRoaXMuX2RlbGV0ZUJ0biA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19kZWxldGUtYnV0dG9uXCIpO1xyXG4gICAgICAgIHRoaXMuX3RpdGxlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX3RpdGxlXCIpLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuICAgICAgICB0aGlzLl9lbGVtZW50SW1hZ2UuYWx0ID0gdGhpcy5fbmFtZTtcclxuICAgICAgICB0aGlzLl9lbGVtZW50SW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcclxuICAgICAgICB0aGlzLl9zZXRldmVudExpc3RlbmVycygpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydCBkZWZhdWx0IENhcmQ7IiwiY2xhc3MgU2VjdGlvbiB7XHJcblxyXG4gICAgY29uc3RydWN0b3IoeyByZW5kZXJlciwgaXRlbXMgfSwgY29udGFpbmVyKSB7XHJcbiAgICAgICAgdGhpcy5faXRlbXMgPSBpdGVtcztcclxuICAgICAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgICAgIHRoaXMuX2NvbnRhaW5lciA9IGNvbnRhaW5lcjtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXJJdGVtcygpIHtcclxuICAgICAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgYWRkSXRlbShlbGVtZW50KSB7XHJcbiAgICAgICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0IGRlZmF1bHQgU2VjdGlvbjsiLCIgZXhwb3J0IGNsYXNzIFBvcHVwIHtcclxuICAgICBjb25zdHJ1Y3RvcihQb3B1cFNlbGVjdG9yKSB7XHJcbiAgICAgICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoUG9wdXBTZWxlY3Rvcik7XHJcbiAgICAgICAgIHRoaXMuY2xvc2UgPSB0aGlzLmNsb3NlLmJpbmQodGhpcyk7XHJcbiAgICAgfVxyXG5cclxuICAgICBfaGFuZGxlRXNjQ2xvc2UgPSAoZSkgPT4ge1xyXG4gICAgICAgICBpZiAoZS5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICAgfVxyXG4gICAgIH1cclxuXHJcbiAgICAgb3BlbigpIHtcclxuICAgICAgICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJwb3B1cF9hY3RpdmVcIik7XHJcbiAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLl9jbG9zZVBvcHVwT25SZW1vdGVDbGljayk7XHJcbiAgICAgfTtcclxuICAgICBjbG9zZSgpIHtcclxuICAgICAgICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9hY3RpdmVcIik7XHJcbiAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLl9jbG9zZVBvcHVwT25SZW1vdGVDbGljayk7XHJcbiAgICAgfTtcclxuXHJcbiAgICAgX2Nsb3NlUG9wdXBPblJlbW90ZUNsaWNrID0gKGUpID0+IHtcclxuICAgICAgICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwXCIpKSB7XHJcbiAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgIH1cclxuICAgICB9XHJcblxyXG4gICAgIHNldEV2ZW50TGlzdGVuZXIoKSB7XHJcbiAgICAgICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICAgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cF9fY2xvc2UtYnRuJylcclxuICAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICAgICAgIH1cclxuICAgICAgICAgfSk7XHJcbiAgICAgfVxyXG4gfSIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSAnLi9Qb3B1cC5qcyc7XHJcblxyXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yKGZvcm1TZWxlY3Rvciwgc3VibWl0SGFuZGxlcikge1xyXG4gICAgICAgIHN1cGVyKGZvcm1TZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbnB1dHMtY29udGFpbmVyXCIpO1xyXG4gICAgICAgIHRoaXMuc3VibWl0SGFuZGxlciA9IHN1Ym1pdEhhbmRsZXI7XHJcbiAgICAgICAgdGhpcy5mb3JtU2VsZWN0b3IgPSBmb3JtU2VsZWN0b3I7XHJcbiAgICAgICAgdGhpcy5mb3JtSW5wdXRWYWx1ZXMgPSB7fTtcclxuICAgICAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwX19pbnB1dCcpO1xyXG4gICAgfVxyXG5cclxuICAgIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgICAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5mb3JtSW5wdXRWYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdGhpcy5mb3JtSW5wdXRWYWx1ZXM7XHJcbiAgICB9XHJcbiAgICBjbG9zZSA9ICgpID0+IHtcclxuICAgICAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcclxuICAgIH07XHJcblxyXG5cclxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGUpID0+IHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBjb25zdCBkYXRhID0gdGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKTtcclxuICAgICAgICAgICAgdGhpcy5zdWJtaXRIYW5kbGVyKGRhdGEpOyAvL3RoaXMuX2dldElucHV0VmFsdWVzIGluXHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcigpO1xyXG5cclxuICAgIH1cclxuICAgIHNldElucHV0VmFsdWVzKGRhdGEpIHtcclxuICAgICAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgICAgICAgLy8gaGVyZSB5b3UgaW5zZXJ0IHRoZSBgdmFsdWVgIGJ5IHRoZSBgbmFtZWAgb2YgdGhlIGlucHV0XHJcbiAgICAgICAgICAgIGlucHV0LnZhbHVlID0gZGF0YVtpbnB1dC5uYW1lXTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICAgICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5pbWFnZUVsbWVudCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2ltYWdlJyk7XHJcbiAgICAgICAgdGhpcy5faW1hZ2VDYXB0aW9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY2FwdGlvbicpO1xyXG5cclxuICAgIH1cclxuICAgIG9wZW4obGluaywgdGV4dCkge1xyXG4gICAgICAgIHRoaXMuaW1hZ2VFbG1lbnQuc3JjID0gbGluaztcclxuICAgICAgICB0aGlzLl9pbWFnZUNhcHRpb24udGV4dENvbnRlbnQgPSB0ZXh0O1xyXG4gICAgICAgIHRoaXMuaW1hZ2VFbG1lbnQuYWx0ID0gYGEgbmljZSB2aWV3IG9mIGEgJHt0ZXh0fWA7XHJcbiAgICAgICAgc3VwZXIub3BlbigpO1xyXG4gICAgfVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgICBjb25zdHJ1Y3Rvcih1c2VyTmFtZSwgdXNlckpvYikge1xyXG4gICAgICAgIHRoaXMuX3VzZXJOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VyTmFtZSk7XHJcbiAgICAgICAgdGhpcy5fdXNlckpvYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlckpvYik7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VXNlckluZm8oKSB7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIG5hbWU6IHRoaXMuX3VzZXJOYW1lLnRleHRDb250ZW50LFxyXG4gICAgICAgICAgICB0aXRsZTogdGhpcy5fdXNlckpvYi50ZXh0Q29udGVudCxcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgc2V0VXNlckluZm8obmFtZSwgam9iKSB7XHJcbiAgICAgICAgdGhpcy5fdXNlck5hbWUudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMuX3VzZXJKb2IudGV4dENvbnRlbnQgPSBqb2I7XHJcbiAgICB9XHJcbn0iLCIvLyAgIGNvbnN0IGluaXRpYWxFbGVtZW50cyA9IFt7XHJcbi8vICAgICAgICAgICBuYW1lOiAnWW9zZW1pdGUgVmFsbGV5JyxcclxuLy8gICAgICAgICAgIGxpbms6ICdodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS95b3NlbWl0ZS5qcGcnLFxyXG4vLyAgICAgICB9LFxyXG4vLyAgICAgICB7XHJcbi8vICAgICAgICAgICBuYW1lOiAnTGFrZSBMb3Vpc2UnLFxyXG4vLyAgICAgICAgICAgbGluazogJ2h0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xha2UtbG91aXNlLmpwZycsXHJcbi8vICAgICAgIH0sXHJcbi8vICAgICAgIHtcclxuLy8gICAgICAgICAgIG5hbWU6ICdCYWxkIE1vdW50YWlucycsXHJcbi8vICAgICAgICAgICBsaW5rOiAnaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvYmFsZC1tb3VudGFpbnMuanBnJyxcclxuLy8gICAgICAgfSxcclxuLy8gICAgICAge1xyXG4vLyAgICAgICAgICAgbmFtZTogJ0xhdGVtYXInLFxyXG4vLyAgICAgICAgICAgbGluazogJ2h0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xhdGVtYXIuanBnJyxcclxuLy8gICAgICAgfSxcclxuLy8gICAgICAge1xyXG4vLyAgICAgICAgICAgbmFtZTogJ1Zhbm9pc2UgTmF0aW9uYWwgUGFyaycsXHJcbi8vICAgICAgICAgICBsaW5rOiAnaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvdmFub2lzZS5qcGcnLFxyXG4vLyAgICAgICB9LFxyXG4vLyAgICAgICB7XHJcbi8vICAgICAgICAgICBuYW1lOiAnTGFnbyBkaSBCcmFpZXMnLFxyXG4vLyAgICAgICAgICAgbGluazogJ2h0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xhZ28uanBnJyxcclxuLy8gICAgICAgfSxcclxuLy8gICBdO1xyXG5jb25zdCBmZXRjaEludGlhbCA9IGZldGNoKFwiaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtMy1lbi9jYXJkc1wiLCB7XHJcbiAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogXCJiYzUxMjkxNy02Y2I0LTQwOGItOWZlZi0wOGQyODVkZTdhZjNcIixcclxuICAgICAgICBcImNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICAgIH1cclxufSk7XHJcblxyXG5jb25zdCBpbml0aWFsRWxlbWVudHMgPVxyXG4gICAgZmV0Y2hJbnRpYWwudGhlbihyZXMgPT4geyByZXR1cm4gcmVzLmpzb24oKSB9KVxyXG4gICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xyXG4gICAgICAgIHJldHVybiBjb25zb2xlLmxvZyhyZXN1bHQpO1xyXG4gICAgfSk7O1xyXG4vLyBwb3B1cFxyXG5cclxuY29uc3QgbmFtZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbnB1dHMtdHlwZS1uYW1lJyk7XHJcbmNvbnN0IGFib3V0SW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2lucHV0cy10eXBlLWRlc2NyaXB0aW9uJyk7XHJcbmNvbnN0IGVkaXRQb3B1cEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2lucHV0cy1jb250YWluZXInKTtcclxuY29uc3QgZWRpdFBvcHVwRm9ybUFkZFBsYWNlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICcucG9wdXBfX2lucHV0cy1jb250YWluZXItYWRkUGxhY2UnLFxyXG4pO1xyXG5cclxuY29uc3QgZWRpdE1vZGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2VkaXQnKTtcclxuY29uc3QgYWRkUGxhY2VCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYWRkJyk7XHJcbi8vZWxlbWVudHNcclxuY29uc3QgY2FyZFNlbGVjdG9yID0gJy5lbGVtZW50LVN0cmFjdHVyZSc7XHJcbmNvbnN0IGVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRzJyk7XHJcbmNvbnN0IGVsZW1lbnRMaXN0ID0gZWxlbWVudHMucXVlcnlTZWxlY3RvcignLmVsZW1lbnRzX19saXN0Jyk7XHJcbi8vaW1hZ2UgcHJldmlld1xyXG5cclxuLy8gaW1nc1xyXG5jb25zdCBsb2dvSW1nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcl9fbG9nbycpO1xyXG5jb25zdCB0aGVwcm9maWxlSW1nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2ltZycpO1xyXG5jb25zdCB2YWxpZGF0aW9uU2V0dGluZ3MgPSB7XHJcbiAgICBpbnB1dFNlbGVjdG9yOiAnLnBvcHVwX19pbnB1dCcsXHJcbiAgICBzdWJtaXRCdXR0b25TZWxlY3RvcjogJy5wb3B1cF9fc3VibWl0LWJ1dHRvbicsXHJcbiAgICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiAncG9wdXBfX2J1dHRvbl9kaXNhYmxlZCcsXHJcbiAgICBpbnB1dEVycm9yQ2xhc3M6ICdwb3B1cF9faW5wdXQtZXJyb3InLFxyXG4gICAgZXJyb3JDbGFzczogJ3BvcHVwX19lcnJvcl92aXNpYmxlJyxcclxufTtcclxuLy8gZW5kIG9mIGltZ3MgXHJcbi8vcG9wdXAgZnVuY3Rpb25zXHJcblxyXG5leHBvcnQge1xyXG4gICAgaW5pdGlhbEVsZW1lbnRzLFxyXG4gICAgbmFtZUlucHV0LFxyXG4gICAgYWJvdXRJbnB1dCxcclxuICAgIGVkaXRQb3B1cEZvcm0sXHJcbiAgICBlZGl0UG9wdXBGb3JtQWRkUGxhY2UsXHJcbiAgICBlZGl0TW9kZU5hbWUsXHJcbiAgICBhZGRQbGFjZUJ0bixcclxuICAgIGNhcmRTZWxlY3RvcixcclxuICAgIGVsZW1lbnRzLFxyXG4gICAgZWxlbWVudExpc3QsXHJcbiAgICBsb2dvSW1nLFxyXG4gICAgdGhlcHJvZmlsZUltZyxcclxuICAgIHZhbGlkYXRpb25TZXR0aW5nc1xyXG5cclxufSIsImltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gJy4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyc7XHJcbmltcG9ydCBDYXJkIGZyb20gJy4uL2NvbXBvbmVudHMvQ2FyZC5qcyc7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gJy4uL2NvbXBvbmVudHMvU2VjdGlvbi5qcyc7XHJcbmltcG9ydCAnLi4vcGFnZXMvaW5kZXguY3NzJztcclxuaW1wb3J0IHsgUG9wdXBXaXRoRm9ybSB9IGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyc7XHJcbmltcG9ydCB7IFBvcHVwV2l0aEltYWdlIH0gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyc7XHJcbmltcG9ydCB7IFVzZXJJbmZvIH0gZnJvbSAnLi4vY29tcG9uZW50cy9Vc2VySW5mby5qcyc7XHJcblxyXG5pbXBvcnQgbG9nbyBmcm9tIFwiLi4vaW1hZ2VzL2xvZ28uc3ZnXCI7XHJcbmltcG9ydCBwcm9maWxlSW1nIGZyb20gXCIuLi9pbWFnZXMvcHJvZmlsZVBlcnNvbi5qcGdcIjtcclxuaW1wb3J0IHtcclxuICAgIGluaXRpYWxFbGVtZW50cyxcclxuICAgIG5hbWVJbnB1dCxcclxuICAgIGFib3V0SW5wdXQsXHJcbiAgICBlZGl0UG9wdXBGb3JtLFxyXG4gICAgZWRpdFBvcHVwRm9ybUFkZFBsYWNlLFxyXG4gICAgZWRpdE1vZGVOYW1lLFxyXG4gICAgYWRkUGxhY2VCdG4sXHJcbiAgICBjYXJkU2VsZWN0b3IsXHJcbiAgICBlbGVtZW50TGlzdCxcclxuICAgIGxvZ29JbWcsXHJcbiAgICB0aGVwcm9maWxlSW1nLFxyXG4gICAgdmFsaWRhdGlvblNldHRpbmdzXHJcbn0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzLmpzJ1xyXG5cclxubG9nb0ltZy5zcmMgPSBsb2dvO1xyXG50aGVwcm9maWxlSW1nLnNyYyA9IHByb2ZpbGVJbWc7XHJcblxyXG5jb25zb2xlLmxvZyhpbml0aWFsRWxlbWVudHMpO1xyXG5cclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oXCIucHJvZmlsZV9fZGVzY3JpcHRpb24tbmFtZVwiLCBcIi5wcm9maWxlX19kZXNjcmlwdGlvbi1wcm9mXCIpO1xyXG5cclxuY29uc3Qgb3BlbkNhcmRQb3B1cCA9ICgpID0+IHtcclxuICAgIHBvcHVwQWRkUGxhY2Uub3BlbigpO1xyXG4gICAgYWRkRm9ybVZhbGlkYXRvci50b2dnbGVCdXR0b24oKTtcclxufTtcclxuXHJcbmNvbnN0IGVkaXRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvblNldHRpbmdzLCBlZGl0UG9wdXBGb3JtKTtcclxuY29uc3QgYWRkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxyXG4gICAgdmFsaWRhdGlvblNldHRpbmdzLFxyXG4gICAgZWRpdFBvcHVwRm9ybUFkZFBsYWNlLFxyXG4pO1xyXG5cclxuXHJcbi8vIHBvcHVwIGNsYXNzIGJhc2VkXHJcblxyXG5jb25zdCBwb3B1cEVkaXRQcm9maWxlID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIucHJvZmlsZS1wb3B1cFwiLCAoZGF0YSkgPT4ge1xyXG4gICAgdXNlckluZm8uc2V0VXNlckluZm8oZGF0YS5uYW1lLCBkYXRhLmpvYik7XHJcbn0pO1xyXG5wb3B1cEVkaXRQcm9maWxlLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5jb25zdCBwb3B1cFByZXZpZXdJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZSgnLnBvcHVwX2ltYWdlLXByZXYnKTtcclxucG9wdXBQcmV2aWV3SW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcigpO1xyXG5cclxuXHJcblxyXG5jb25zdCBlZGl0UHJvZmlsZSA9ICgpID0+IHtcclxuICAgIHBvcHVwRWRpdFByb2ZpbGUub3BlbigpO1xyXG4gICAgY29uc3QgdXNlckRhdGEgPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG4gICAgbmFtZUlucHV0LnZhbHVlID0gdXNlckRhdGEubmFtZTtcclxuICAgIGFib3V0SW5wdXQudmFsdWUgPSB1c2VyRGF0YS50aXRsZTtcclxuXHJcbn07XHJcblxyXG5jb25zdCBwb3B1cEFkZFBsYWNlID0gbmV3IFBvcHVwV2l0aEZvcm0oJy5wb3B1cC1hZGRFbGVtZW50JywgKGRhdGEpID0+IHtcclxuICAgIC8vIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBjb25zdCBuZXdFbGVtZW50ID0ge1xyXG4gICAgICAgIG5hbWU6IGAke2RhdGEucGxhY2VOYW1lfWAsXHJcbiAgICAgICAgbGluazogYCR7ZGF0YS5wbGFjZUxpbmt9YCxcclxuICAgIH07XHJcbiAgICBzZWN0aW9uLmFkZEl0ZW0oY3JlYXRlQ2FyZChuZXdFbGVtZW50KSk7XHJcbn0pO1xyXG5wb3B1cEFkZFBsYWNlLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5lZGl0Rm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbmFkZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG4vL2VsZW1lbnRzIGZ1bmN0aW9uc1xyXG4vLyBAZnVuY1xyXG5jb25zdCBjcmVhdGVDYXJkID0gKGVsZW1lbnQpID0+IHtcclxuICAgIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChlbGVtZW50LCBjYXJkU2VsZWN0b3IsIHtcclxuICAgICAgICBoYW5kbGVDbGlja0NhcmQ6ICgpID0+IHtcclxuICAgICAgICAgICAgcG9wdXBQcmV2aWV3SW1hZ2Uub3BlbihlbGVtZW50LmxpbmssIGVsZW1lbnQubmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSkuYWRkRWxtZW50KCk7XHJcbiAgICByZXR1cm4gY2FyZDtcclxufTtcclxuXHJcbmNvbnN0IHByZXBlbmRDYXJkID0gKGVsZW1lbnQpID0+IHtcclxuICAgIGNvbnN0IGNhcmQgPSBjcmVhdGVDYXJkKGVsZW1lbnQpO1xyXG4gICAgc2VjdGlvbi5hZGRJdGVtKGNhcmQpXHJcbn07XHJcblxyXG4vL3BvcHVwIGV2ZW50c0xpc3RlbmVyc1xyXG4vLyBAbGlzdGVuc1xyXG5cclxuZWRpdE1vZGVOYW1lLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZWRpdFByb2ZpbGUpO1xyXG5hZGRQbGFjZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9wZW5DYXJkUG9wdXApO1xyXG5cclxuY29uc3Qgc2VjdGlvbiA9IG5ldyBTZWN0aW9uKHtcclxuICAgICAgICByZW5kZXJlcjogcHJlcGVuZENhcmQsXHJcbiAgICAgICAgaXRlbXM6IGluaXRpYWxFbGVtZW50cyxcclxuICAgIH0sXHJcbiAgICBlbGVtZW50TGlzdCxcclxuKTtcclxuc2VjdGlvbi5yZW5kZXJJdGVtcygpOyJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwicCIsIkZvcm1WYWxpZGF0b3IiLCJzZXR0aW5ncyIsImZvcm1FbGVtZW50IiwidGhpcyIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9mb3JtIiwiX2lucHV0cyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfYnV0dG9uIiwicXVlcnlTZWxlY3RvciIsImlucHV0IiwiZXJyb3JFbGVtZW50IiwiaWQiLCJ0ZXh0Q29udGVudCIsImNsYXNzTGlzdCIsInJlbW92ZSIsInZhbGlkYXRpb25NZXNzYWdlIiwiYWRkIiwiY2hlY2tWYWxpZGl0eSIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsImV2ZXJ5IiwidmFsaWRpdHkiLCJ2YWxpZCIsImlzRm9ybVZhbGlkIiwicmVtb3ZlQXR0cmlidXRlIiwiZGlzYWJsZWQiLCJ0b2dnbGVCdXR0b24iLCJmb3JFYWNoIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJlIiwicHJldmVudERlZmF1bHQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJDYXJkIiwiZGF0YSIsImNhcmRTZWxlY3RvciIsImhhbmRsZUNsaWNrQ2FyZCIsIl9lbGVtZW50IiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVDbGlja0NhcmQiLCJkb2N1bWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfZWxlbWVudEltYWdlIiwiX2xpa2VCdG4iLCJldnQiLCJfdG9nZ2xlTGlrZSIsIl9kZWxldGVCdG4iLCJfaGFuZGxlRWxtZW50UmVtb3ZlIiwidGFyZ2V0IiwidG9nZ2xlIiwiX2dldFRlbXBsYXRlIiwiX3RpdGxlIiwiYWx0Iiwic3JjIiwiX3NldGV2ZW50TGlzdGVuZXJzIiwiU2VjdGlvbiIsImNvbnRhaW5lciIsInJlbmRlcmVyIiwiaXRlbXMiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiaXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwiUG9wdXAiLCJQb3B1cFNlbGVjdG9yIiwia2V5IiwiY2xvc2UiLCJjb250YWlucyIsIl9wb3B1cEVsZW1lbnQiLCJiaW5kIiwiX2hhbmRsZUVzY0Nsb3NlIiwiX2Nsb3NlUG9wdXBPblJlbW90ZUNsaWNrIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIlBvcHVwV2l0aEZvcm0iLCJmb3JtU2VsZWN0b3IiLCJzdWJtaXRIYW5kbGVyIiwicmVzZXQiLCJmb3JtSW5wdXRWYWx1ZXMiLCJfaW5wdXRMaXN0IiwidmFsdWUiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJQb3B1cFdpdGhJbWFnZSIsInBvcHVwU2VsZWN0b3IiLCJpbWFnZUVsbWVudCIsIl9pbWFnZUNhcHRpb24iLCJ0ZXh0IiwiVXNlckluZm8iLCJ1c2VyTmFtZSIsInVzZXJKb2IiLCJfdXNlck5hbWUiLCJfdXNlckpvYiIsInRpdGxlIiwiam9iIiwiaW5pdGlhbEVsZW1lbnRzIiwiZmV0Y2giLCJoZWFkZXJzIiwiYXV0aG9yaXphdGlvbiIsInRoZW4iLCJyZXMiLCJqc29uIiwicmVzdWx0IiwiY29uc29sZSIsImxvZyIsIm5hbWVJbnB1dCIsImFib3V0SW5wdXQiLCJlZGl0UG9wdXBGb3JtIiwiZWRpdFBvcHVwRm9ybUFkZFBsYWNlIiwiZWRpdE1vZGVOYW1lIiwiYWRkUGxhY2VCdG4iLCJlbGVtZW50TGlzdCIsImxvZ29JbWciLCJ0aGVwcm9maWxlSW1nIiwidmFsaWRhdGlvblNldHRpbmdzIiwibG9nbyIsInByb2ZpbGVJbWciLCJ1c2VySW5mbyIsImVkaXRGb3JtVmFsaWRhdG9yIiwiYWRkRm9ybVZhbGlkYXRvciIsInBvcHVwRWRpdFByb2ZpbGUiLCJzZXRVc2VySW5mbyIsInNldEV2ZW50TGlzdGVuZXJzIiwicG9wdXBQcmV2aWV3SW1hZ2UiLCJzZXRFdmVudExpc3RlbmVyIiwicG9wdXBBZGRQbGFjZSIsIm5ld0VsZW1lbnQiLCJwbGFjZU5hbWUiLCJwbGFjZUxpbmsiLCJzZWN0aW9uIiwiYWRkSXRlbSIsImNyZWF0ZUNhcmQiLCJlbmFibGVWYWxpZGF0aW9uIiwib3BlbiIsImFkZEVsbWVudCIsInVzZXJEYXRhIiwiZ2V0VXNlckluZm8iLCJjYXJkIiwicmVuZGVySXRlbXMiXSwic291cmNlUm9vdCI6IiJ9