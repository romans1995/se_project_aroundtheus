(()=>{"use strict";var e={};function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.p="";const r=function(){function e(n,r){var o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._inputSelector=n.inputSelector,this._submitButtonSelector=n.submitButtonSelector,this._inactiveButtonClass=n.inactiveButtonClass,this._inputErrorClass=n.inputErrorClass,this._errorClass=n.errorClass,this._form=r,this._inputs=function(e){if(Array.isArray(e))return t(e)}(o=this._form.querySelectorAll(this._inputSelector))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(o)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),this._button=this._form.querySelector(this._submitButtonSelector)}var r,o;return r=e,(o=[{key:"_hideInputError",value:function(e){var t=this._form.querySelector("#"+e.id+"-error");t.textContent="",t.classList.remove(this._errorClass)}},{key:"_showInputError",value:function(e){var t=this._form.querySelector("#"+e.id+"-error");t.textContent=e.validationMessage,t.classList.add(this._errorClass)}},{key:"_checkInputValidity",value:function(e){e.checkValidity()?this._hideInputError(e):this._showInputError(e,this._form)}},{key:"isFormValid",value:function(){return this._inputs.every((function(e){return!0===e.validity.valid}))}},{key:"toggleButton",value:function(){this.isFormValid()?this._button.removeAttribute("disabled"):this._button.disabled=!0}},{key:"_setEventListeners",value:function(){var e=this;this.toggleButton(this._inputs),this._inputs.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e.toggleButton(t)}))}))}},{key:"enableValidation",value:function(){this._form.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners(this._form)}}])&&n(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const i=function(){function e(t,n,r){var o=r.handleClickCard;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._element=t,this._name=t.name,this._link=t.link,this._cardSelector=n,this._handleClickCard=o}var t,n;return t=e,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".element").cloneNode(!0)}},{key:"_seteventListeners",value:function(){var e=this;this._elementImage.addEventListener("click",(function(){e._handleClickCard(e._link,e._name)})),this._likeBtn.addEventListener("click",(function(t){e._toggleLike(t)})),this._deleteBtn.addEventListener("click",(function(t){e._handleElmentRemove(t)}))}},{key:"_toggleLike",value:function(e){e.target.classList.toggle("element__like-button_active")}},{key:"_handleElmentRemove",value:function(){this._element.remove()}},{key:"addElment",value:function(){return this._element=this._getTemplate(),this._elementImage=this._element.querySelector(".element__image"),this._likeBtn=this._element.querySelector(".element__like-button"),this._deleteBtn=this._element.querySelector(".element__delete-button"),this._title=this._element.querySelector(".element__title").textContent=this._name,this._elementImage.alt=this._name,this._elementImage.src=this._link,this._seteventListeners(),this._element}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const a=function(){function e(t,n){var r=t.renderer,o=t.items;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._items=o,this._renderer=r,this._container=n}var t,n;return t=e,(n=[{key:"renderItems",value:function(){var e=this;this._items.forEach((function(t){e._renderer(t)}))}},{key:"addItem",value:function(e){this._container.prepend(e)}}])&&u(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),l(this,"_handleEscClose",(function(e){"Escape"===e.key&&n.close()})),l(this,"_closePopupOnRemoteClick",(function(e){e.target.classList.contains("popup")&&n.close()})),this._popupElement=document.querySelector(t),this.close=this.close.bind(this)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popupElement.classList.add("popup_active"),document.addEventListener("keydown",this._handleEscClose),document.addEventListener("mousedown",this._closePopupOnRemoteClick)}},{key:"close",value:function(){this._popupElement.classList.remove("popup_active"),document.removeEventListener("keydown",this._handleEscClose),document.removeEventListener("mousedown",this._closePopupOnRemoteClick)}},{key:"setEventListener",value:function(){var e=this;this._popupElement.addEventListener("click",(function(t){t.target.classList.contains("popup__close-btn")&&e.close()}))}}])&&c(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function d(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){return h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=_(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},h.apply(this,arguments)}function _(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=v(r);if(o){var n=v(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return d(this,e)});function u(e,t){var n,r,o,a,c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),c=function(){h((n=m(r),v(u.prototype)),"close",n).call(n),r._form.reset()},(a="close")in(o=m(r=i.call(this,e)))?Object.defineProperty(o,a,{value:c,enumerable:!0,configurable:!0,writable:!0}):o[a]=c,r._form=r._popupElement.querySelector(".popup__inputs-container"),r.submitHandler=t,r.formSelector=e,r.formInputValues={},r._inputList=r._popupElement.querySelectorAll(".popup__input"),r}return t=u,(n=[{key:"_getInputValues",value:function(){var e=this;return this._inputList.forEach((function(t){e.formInputValues[t.name]=t.value})),this.formInputValues}},{key:"setEventListeners",value:function(){var e=this;this._form.addEventListener("submit",(function(t){t.preventDefault();var n=e._getInputValues();e.submitHandler(n),e.close()})),h(v(u.prototype),"setEventListener",this).call(this)}},{key:"setInputValues",value:function(e){this._inputList.forEach((function(t){t.value=e[t.name]}))}}])&&f(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(s);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(){return k="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=E(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},k.apply(this,arguments)}function E(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=j(e)););return e}function S(e,t){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},S(e,t)}function O(e,t){if(t&&("object"===g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function j(e){return j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},j(e)}var C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=j(r);if(o){var n=j(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return O(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e)).imageElment=t._popupElement.querySelector(".popup__image"),t._imageCaption=t._popupElement.querySelector(".popup__caption"),t}return t=u,(n=[{key:"open",value:function(e,t){this.imageElment.src=e,this._imageCaption.textContent=t,this.imageElment.alt="a nice view of a ".concat(t),k(j(u.prototype),"open",this).call(this)}}])&&w(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(s);function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var P=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._userName=document.querySelector(t),this._userJob=document.querySelector(n)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._userName.textContent,title:this._userJob.textContent}}},{key:"setUserInfo",value:function(e,t){this._userName.textContent=e,this._userJob.textContent=t}}])&&L(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();const I=e.p+"c75819857ff1599f0c50.svg",q=e.p+"5fa4ff08da722d75cea6.jpg";var R=document.querySelector(".popup__inputs-type-name"),B=document.querySelector(".popup__inputs-type-description"),x=document.querySelector(".popup__inputs-container"),V=document.querySelector(".popup__inputs-container-addPlace"),T=document.querySelector(".profile__edit"),A=document.querySelector(".profile__add"),D=document.querySelector(".elements").querySelector(".elements__list"),N=document.querySelector(".header__logo"),U=document.querySelector(".profile__img"),J={inputSelector:".popup__input",submitButtonSelector:".popup__submit-button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input-error",errorClass:"popup__error_visible"};N.src=I,U.src=q;var M=new P(".profile__description-name",".profile__description-prof"),F=new r(J,x),H=new r(J,V),Y=new b(".profile-popup",(function(e){M.setUserInfo(e.name,e.job)}));Y.setEventListeners();var $=new C(".popup_image-prev");$.setEventListener();var z=new b(".popup-addElement",(function(e){var t={name:"".concat(e.placeName),link:"".concat(e.placeLink)};K.addItem(G(t))}));z.setEventListeners(),F.enableValidation(),H.enableValidation();var G=function(e){return new i(e,".element-Stracture",{handleClickCard:function(){$.open(e.link,e.name)}}).addElment()};T.addEventListener("click",(function(){Y.open();var e=M.getUserInfo();R.value=e.name,B.value=e.title})),A.addEventListener("click",(function(){z.open(),H.toggleButton()}));var K=new a({renderer:function(e){var t=G(e);K.addItem(t)},items:[{name:"Yosemite Valley",link:"https://code.s3.yandex.net/web-code/yosemite.jpg"},{name:"Lake Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{name:"Bald Mountains",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{name:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg"},{name:"Vanoise National Park",link:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{name:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg"}]},D);K.renderItems()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QzFCL0IsRUFBVWQsTUFBUTRDLEVBQVMzRixLQUMzQjhELEVBQVdmLE1BQVE0QyxFQUFTaEMsS0FFL0IsSUFrQ0RPLEVBQVk3RSxpQkFBaUIsU0FoRVAsV0FDbEI0RixFQUFjUSxPQUNkZCxFQUFpQnhGLGNBQ3BCLElBK0RELElBQU1rRyxFQUFVLElBQUloRSxFQUFRLENBQ3BCRSxTQVpZLFNBQUNNLEdBQ2pCLElBQU1nRSxFQUFPTixFQUFXMUQsR0FDeEJ3RCxFQUFRQyxRQUFRTyxFQUNuQixFQVVPckUsTURsR2tCLENBQUMsQ0FDakJ4QixLQUFNLGtCQUNORSxLQUFNLG9EQUVWLENBQ0lGLEtBQU0sY0FDTkUsS0FBTSx1REFFVixDQUNJRixLQUFNLGlCQUNORSxLQUFNLDBEQUVWLENBQ0lGLEtBQU0sVUFDTkUsS0FBTSxtREFFVixDQUNJRixLQUFNLHdCQUNORSxLQUFNLG1EQUVWLENBQ0lGLEtBQU0saUJBQ05FLEtBQU0sa0RDOEVaaUUsR0FFSmtCLEVBQVFTLGEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvd2VicGFjay9ydW50aW1lL3B1YmxpY1BhdGgiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9wYWdlcy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjsiLCJjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICAgIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtRWxlbWVudCkge1xyXG5cclxuICAgICAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gc2V0dGluZ3MuaW5wdXRTZWxlY3RvcjtcclxuICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBzZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xyXG4gICAgICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IHNldHRpbmdzLmlucHV0RXJyb3JDbGFzcztcclxuICAgICAgICB0aGlzLl9lcnJvckNsYXNzID0gc2V0dGluZ3MuZXJyb3JDbGFzcztcclxuXHJcbiAgICAgICAgdGhpcy5fZm9ybSA9IGZvcm1FbGVtZW50O1xyXG4gICAgICAgIHRoaXMuX2lucHV0cyA9IFsuLi50aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcildO1xyXG4gICAgICAgIHRoaXMuX2J1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcblxyXG4gICAgfVxyXG4gICAgX2hpZGVJbnB1dEVycm9yKGlucHV0KSB7XHJcbiAgICAgICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKFwiI1wiICsgaW5wdXQuaWQgKyBcIi1lcnJvclwiKTtcclxuICAgICAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gICAgICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gICAgfVxyXG4gICAgX3Nob3dJbnB1dEVycm9yKGlucHV0KSB7XHJcbiAgICAgICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKFwiI1wiICsgaW5wdXQuaWQgKyBcIi1lcnJvclwiKTtcclxuICAgICAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgICAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICAgIH1cclxuICAgIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXQpIHtcclxuICAgICAgICBpZiAoaW5wdXQuY2hlY2tWYWxpZGl0eSgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dCwgdGhpcy5fZm9ybSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlzRm9ybVZhbGlkKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9pbnB1dHMuZXZlcnkoKGlucHV0KSA9PiBpbnB1dC52YWxpZGl0eS52YWxpZCA9PT0gdHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgdG9nZ2xlQnV0dG9uKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzRm9ybVZhbGlkKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5fYnV0dG9uLnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbi5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvbih0aGlzLl9pbnB1dHMpO1xyXG4gICAgICAgIHRoaXMuX2lucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICAgICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gY2hlY2sgdmFsaWRpdHlcclxuICAgICAgICAgICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dCk7XHJcbiAgICAgICAgICAgICAgICAvLyB0b2dnbGUgdGhlIGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgdGhpcy50b2dnbGVCdXR0b24oaW5wdXQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnModGhpcy5fZm9ybSk7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0IGRlZmF1bHQgRm9ybVZhbGlkYXRvcjsiLCJjbGFzcyBDYXJkIHtcclxuICAgIGNvbnN0cnVjdG9yKGRhdGEsIGNhcmRTZWxlY3RvciwgeyBoYW5kbGVDbGlja0NhcmQgfSkge1xyXG4gICAgICAgIHRoaXMuX2VsZW1lbnQgPSBkYXRhO1xyXG4gICAgICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XHJcbiAgICAgICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcclxuICAgICAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlQ2xpY2tDYXJkID0gaGFuZGxlQ2xpY2tDYXJkO1xyXG5cclxuICAgIH1cclxuICAgIF9nZXRUZW1wbGF0ZSgpIHtcclxuXHJcbiAgICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcikuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRcIikuY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgICAgIHJldHVybiBjYXJkRWxlbWVudDtcclxuICAgIH1cclxuICAgIF9zZXRldmVudExpc3RlbmVycygpIHtcclxuICAgICAgICB0aGlzLl9lbGVtZW50SW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHsgdGhpcy5faGFuZGxlQ2xpY2tDYXJkKHRoaXMuX2xpbmssIHRoaXMuX25hbWUpIH0pO1xyXG4gICAgICAgIHRoaXMuX2xpa2VCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHsgdGhpcy5fdG9nZ2xlTGlrZShldnQpIH0pO1xyXG4gICAgICAgIHRoaXMuX2RlbGV0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4geyB0aGlzLl9oYW5kbGVFbG1lbnRSZW1vdmUoZXZ0KSB9KTtcclxuICAgIH1cclxuXHJcbiAgICBfdG9nZ2xlTGlrZShldnQpIHtcclxuICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoXCJlbGVtZW50X19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgICB9XHJcblxyXG4gICAgX2hhbmRsZUVsbWVudFJlbW92ZSgpIHtcclxuICAgICAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZEVsbWVudCgpIHtcclxuICAgICAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuICAgICAgICB0aGlzLl9lbGVtZW50SW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9faW1hZ2VcIik7XHJcbiAgICAgICAgdGhpcy5fbGlrZUJ0biA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19saWtlLWJ1dHRvblwiKTtcclxuICAgICAgICB0aGlzLl9kZWxldGVCdG4gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fZGVsZXRlLWJ1dHRvblwiKTtcclxuICAgICAgICB0aGlzLl90aXRsZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X190aXRsZVwiKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcbiAgICAgICAgdGhpcy5fZWxlbWVudEltYWdlLmFsdCA9IHRoaXMuX25hbWU7XHJcbiAgICAgICAgdGhpcy5fZWxlbWVudEltYWdlLnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICAgICAgdGhpcy5fc2V0ZXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcclxuICAgIH1cclxufVxyXG5leHBvcnQgZGVmYXVsdCBDYXJkOyIsImNsYXNzIFNlY3Rpb24ge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHsgcmVuZGVyZXIsIGl0ZW1zIH0sIGNvbnRhaW5lcikge1xyXG4gICAgICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgICAgICB0aGlzLl9jb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICAgICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydCBkZWZhdWx0IFNlY3Rpb247IiwiIGV4cG9ydCBjbGFzcyBQb3B1cCB7XHJcbiAgICAgY29uc3RydWN0b3IoUG9wdXBTZWxlY3Rvcikge1xyXG4gICAgICAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFBvcHVwU2VsZWN0b3IpO1xyXG4gICAgICAgICB0aGlzLmNsb3NlID0gdGhpcy5jbG9zZS5iaW5kKHRoaXMpO1xyXG4gICAgIH1cclxuXHJcbiAgICAgX2hhbmRsZUVzY0Nsb3NlID0gKGUpID0+IHtcclxuICAgICAgICAgaWYgKGUua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgIH1cclxuICAgICB9XHJcblxyXG4gICAgIG9wZW4oKSB7XHJcbiAgICAgICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwicG9wdXBfYWN0aXZlXCIpO1xyXG4gICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgdGhpcy5fY2xvc2VQb3B1cE9uUmVtb3RlQ2xpY2spO1xyXG4gICAgIH07XHJcbiAgICAgY2xvc2UoKSB7XHJcbiAgICAgICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfYWN0aXZlXCIpO1xyXG4gICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgdGhpcy5fY2xvc2VQb3B1cE9uUmVtb3RlQ2xpY2spO1xyXG4gICAgIH07XHJcblxyXG4gICAgIF9jbG9zZVBvcHVwT25SZW1vdGVDbGljayA9IChlKSA9PiB7XHJcbiAgICAgICAgIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1cFwiKSkge1xyXG4gICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgICB9XHJcbiAgICAgfVxyXG5cclxuICAgICBzZXRFdmVudExpc3RlbmVyKCkge1xyXG4gICAgICAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgIGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfX2Nsb3NlLWJ0bicpXHJcbiAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgICAgICB9XHJcbiAgICAgICAgIH0pO1xyXG4gICAgIH1cclxuIH0iLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gJy4vUG9wdXAuanMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihmb3JtU2VsZWN0b3IsIHN1Ym1pdEhhbmRsZXIpIHtcclxuICAgICAgICBzdXBlcihmb3JtU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW5wdXRzLWNvbnRhaW5lclwiKTtcclxuICAgICAgICB0aGlzLnN1Ym1pdEhhbmRsZXIgPSBzdWJtaXRIYW5kbGVyO1xyXG4gICAgICAgIHRoaXMuZm9ybVNlbGVjdG9yID0gZm9ybVNlbGVjdG9yO1xyXG4gICAgICAgIHRoaXMuZm9ybUlucHV0VmFsdWVzID0ge307XHJcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cF9faW5wdXQnKTtcclxuICAgIH1cclxuXHJcbiAgICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuZm9ybUlucHV0VmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9ybUlucHV0VmFsdWVzO1xyXG4gICAgfVxyXG4gICAgY2xvc2UgPSAoKSA9PiB7XHJcbiAgICAgICAgc3VwZXIuY2xvc2UoKTtcclxuICAgICAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChlKSA9PiB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMuX2dldElucHV0VmFsdWVzKCk7XHJcbiAgICAgICAgICAgIHRoaXMuc3VibWl0SGFuZGxlcihkYXRhKTsgLy90aGlzLl9nZXRJbnB1dFZhbHVlcyBpblxyXG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXIoKTtcclxuXHJcbiAgICB9XHJcbiAgICBzZXRJbnB1dFZhbHVlcyhkYXRhKSB7XHJcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgICAgICAgIC8vIGhlcmUgeW91IGluc2VydCB0aGUgYHZhbHVlYCBieSB0aGUgYG5hbWVgIG9mIHRoZSBpbnB1dFxyXG4gICAgICAgICAgICBpbnB1dC52YWx1ZSA9IGRhdGFbaW5wdXQubmFtZV07XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuaW1hZ2VFbG1lbnQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbWFnZScpO1xyXG4gICAgICAgIHRoaXMuX2ltYWdlQ2FwdGlvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2NhcHRpb24nKTtcclxuXHJcbiAgICB9XHJcbiAgICBvcGVuKGxpbmssIHRleHQpIHtcclxuICAgICAgICB0aGlzLmltYWdlRWxtZW50LnNyYyA9IGxpbms7XHJcbiAgICAgICAgdGhpcy5faW1hZ2VDYXB0aW9uLnRleHRDb250ZW50ID0gdGV4dDtcclxuICAgICAgICB0aGlzLmltYWdlRWxtZW50LmFsdCA9IGBhIG5pY2UgdmlldyBvZiBhICR7dGV4dH1gO1xyXG4gICAgICAgIHN1cGVyLm9wZW4oKTtcclxuICAgIH1cclxufVxyXG4iLCJleHBvcnQgY2xhc3MgVXNlckluZm8ge1xyXG4gICAgY29uc3RydWN0b3IodXNlck5hbWUsIHVzZXJKb2IpIHtcclxuICAgICAgICB0aGlzLl91c2VyTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlck5hbWUpO1xyXG4gICAgICAgIHRoaXMuX3VzZXJKb2IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHVzZXJKb2IpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFVzZXJJbmZvKCkge1xyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBuYW1lOiB0aGlzLl91c2VyTmFtZS50ZXh0Q29udGVudCxcclxuICAgICAgICAgICAgdGl0bGU6IHRoaXMuX3VzZXJKb2IudGV4dENvbnRlbnQsXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIHNldFVzZXJJbmZvKG5hbWUsIGpvYikge1xyXG4gICAgICAgIHRoaXMuX3VzZXJOYW1lLnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgICAgICB0aGlzLl91c2VySm9iLnRleHRDb250ZW50ID0gam9iO1xyXG4gICAgfVxyXG59IiwiICBjb25zdCBpbml0aWFsRWxlbWVudHMgPSBbe1xyXG4gICAgICAgICAgbmFtZTogJ1lvc2VtaXRlIFZhbGxleScsXHJcbiAgICAgICAgICBsaW5rOiAnaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUveW9zZW1pdGUuanBnJyxcclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgICAgbmFtZTogJ0xha2UgTG91aXNlJyxcclxuICAgICAgICAgIGxpbms6ICdodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYWtlLWxvdWlzZS5qcGcnLFxyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgICBuYW1lOiAnQmFsZCBNb3VudGFpbnMnLFxyXG4gICAgICAgICAgbGluazogJ2h0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2JhbGQtbW91bnRhaW5zLmpwZycsXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICAgIG5hbWU6ICdMYXRlbWFyJyxcclxuICAgICAgICAgIGxpbms6ICdodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYXRlbWFyLmpwZycsXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICAgIG5hbWU6ICdWYW5vaXNlIE5hdGlvbmFsIFBhcmsnLFxyXG4gICAgICAgICAgbGluazogJ2h0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL3Zhbm9pc2UuanBnJyxcclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgICAgbmFtZTogJ0xhZ28gZGkgQnJhaWVzJyxcclxuICAgICAgICAgIGxpbms6ICdodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYWdvLmpwZycsXHJcbiAgICAgIH0sXHJcbiAgXTtcclxuICAvLyBwb3B1cFxyXG5cclxuICBjb25zdCBuYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2lucHV0cy10eXBlLW5hbWUnKTtcclxuICBjb25zdCBhYm91dElucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbnB1dHMtdHlwZS1kZXNjcmlwdGlvbicpO1xyXG4gIGNvbnN0IGVkaXRQb3B1cEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2lucHV0cy1jb250YWluZXInKTtcclxuICBjb25zdCBlZGl0UG9wdXBGb3JtQWRkUGxhY2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICAnLnBvcHVwX19pbnB1dHMtY29udGFpbmVyLWFkZFBsYWNlJyxcclxuICApO1xyXG5cclxuICBjb25zdCBlZGl0TW9kZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fZWRpdCcpO1xyXG4gIGNvbnN0IGFkZFBsYWNlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2FkZCcpO1xyXG4gIC8vZWxlbWVudHNcclxuICBjb25zdCBjYXJkU2VsZWN0b3IgPSAnLmVsZW1lbnQtU3RyYWN0dXJlJztcclxuICBjb25zdCBlbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50cycpO1xyXG4gIGNvbnN0IGVsZW1lbnRMaXN0ID0gZWxlbWVudHMucXVlcnlTZWxlY3RvcignLmVsZW1lbnRzX19saXN0Jyk7XHJcbiAgLy9pbWFnZSBwcmV2aWV3XHJcblxyXG4gIC8vIGltZ3NcclxuICBjb25zdCBsb2dvSW1nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcl9fbG9nbycpO1xyXG4gIGNvbnN0IHRoZXByb2ZpbGVJbWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9faW1nJyk7XHJcbiAgY29uc3QgdmFsaWRhdGlvblNldHRpbmdzID0ge1xyXG4gICAgICBpbnB1dFNlbGVjdG9yOiAnLnBvcHVwX19pbnB1dCcsXHJcbiAgICAgIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiAnLnBvcHVwX19zdWJtaXQtYnV0dG9uJyxcclxuICAgICAgaW5hY3RpdmVCdXR0b25DbGFzczogJ3BvcHVwX19idXR0b25fZGlzYWJsZWQnLFxyXG4gICAgICBpbnB1dEVycm9yQ2xhc3M6ICdwb3B1cF9faW5wdXQtZXJyb3InLFxyXG4gICAgICBlcnJvckNsYXNzOiAncG9wdXBfX2Vycm9yX3Zpc2libGUnLFxyXG4gIH07XHJcbiAgLy8gZW5kIG9mIGltZ3MgXHJcbiAgLy9wb3B1cCBmdW5jdGlvbnNcclxuXHJcbiAgZXhwb3J0IHtcclxuICAgICAgaW5pdGlhbEVsZW1lbnRzLFxyXG4gICAgICBuYW1lSW5wdXQsXHJcbiAgICAgIGFib3V0SW5wdXQsXHJcbiAgICAgIGVkaXRQb3B1cEZvcm0sXHJcbiAgICAgIGVkaXRQb3B1cEZvcm1BZGRQbGFjZSxcclxuICAgICAgZWRpdE1vZGVOYW1lLFxyXG4gICAgICBhZGRQbGFjZUJ0bixcclxuICAgICAgY2FyZFNlbGVjdG9yLFxyXG4gICAgICBlbGVtZW50cyxcclxuICAgICAgZWxlbWVudExpc3QsXHJcbiAgICAgIGxvZ29JbWcsXHJcbiAgICAgIHRoZXByb2ZpbGVJbWcsXHJcbiAgICAgIHZhbGlkYXRpb25TZXR0aW5nc1xyXG5cclxuICB9IiwiaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSAnLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzJztcclxuaW1wb3J0IENhcmQgZnJvbSAnLi4vY29tcG9uZW50cy9DYXJkLmpzJztcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSAnLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzJztcclxuaW1wb3J0ICcuLi9wYWdlcy9pbmRleC5jc3MnO1xyXG5pbXBvcnQgeyBQb3B1cFdpdGhGb3JtIH0gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzJztcclxuaW1wb3J0IHsgUG9wdXBXaXRoSW1hZ2UgfSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzJztcclxuaW1wb3J0IHsgVXNlckluZm8gfSBmcm9tICcuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzJztcclxuXHJcbmltcG9ydCBsb2dvIGZyb20gXCIuLi9pbWFnZXMvbG9nby5zdmdcIjtcclxuaW1wb3J0IHByb2ZpbGVJbWcgZnJvbSBcIi4uL2ltYWdlcy9wcm9maWxlUGVyc29uLmpwZ1wiO1xyXG5pbXBvcnQge1xyXG4gICAgaW5pdGlhbEVsZW1lbnRzLFxyXG4gICAgbmFtZUlucHV0LFxyXG4gICAgYWJvdXRJbnB1dCxcclxuICAgIGVkaXRQb3B1cEZvcm0sXHJcbiAgICBlZGl0UG9wdXBGb3JtQWRkUGxhY2UsXHJcbiAgICBlZGl0TW9kZU5hbWUsXHJcbiAgICBhZGRQbGFjZUJ0bixcclxuICAgIGNhcmRTZWxlY3RvcixcclxuICAgIGVsZW1lbnRMaXN0LFxyXG4gICAgbG9nb0ltZyxcclxuICAgIHRoZXByb2ZpbGVJbWcsXHJcbiAgICB2YWxpZGF0aW9uU2V0dGluZ3NcclxufSBmcm9tICcuLi91dGlscy9jb25zdGFudHMuanMnXHJcblxyXG5sb2dvSW1nLnNyYyA9IGxvZ287XHJcbnRoZXByb2ZpbGVJbWcuc3JjID0gcHJvZmlsZUltZztcclxuXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uLW5hbWVcIiwgXCIucHJvZmlsZV9fZGVzY3JpcHRpb24tcHJvZlwiKTtcclxuXHJcbmNvbnN0IG9wZW5DYXJkUG9wdXAgPSAoKSA9PiB7XHJcbiAgICBwb3B1cEFkZFBsYWNlLm9wZW4oKTtcclxuICAgIGFkZEZvcm1WYWxpZGF0b3IudG9nZ2xlQnV0dG9uKCk7XHJcbn07XHJcblxyXG5jb25zdCBlZGl0Rm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25TZXR0aW5ncywgZWRpdFBvcHVwRm9ybSk7XHJcbmNvbnN0IGFkZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcclxuICAgIHZhbGlkYXRpb25TZXR0aW5ncyxcclxuICAgIGVkaXRQb3B1cEZvcm1BZGRQbGFjZSxcclxuKTtcclxuXHJcblxyXG4vLyBwb3B1cCBjbGFzcyBiYXNlZFxyXG5cclxuY29uc3QgcG9wdXBFZGl0UHJvZmlsZSA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiLnByb2ZpbGUtcG9wdXBcIiwgKGRhdGEpID0+IHtcclxuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKGRhdGEubmFtZSwgZGF0YS5qb2IpO1xyXG59KTtcclxucG9wdXBFZGl0UHJvZmlsZS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuY29uc3QgcG9wdXBQcmV2aWV3SW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoJy5wb3B1cF9pbWFnZS1wcmV2Jyk7XHJcbnBvcHVwUHJldmlld0ltYWdlLnNldEV2ZW50TGlzdGVuZXIoKTtcclxuXHJcblxyXG5cclxuY29uc3QgZWRpdFByb2ZpbGUgPSAoKSA9PiB7XHJcbiAgICBwb3B1cEVkaXRQcm9maWxlLm9wZW4oKTtcclxuICAgIGNvbnN0IHVzZXJEYXRhID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcclxuICAgIG5hbWVJbnB1dC52YWx1ZSA9IHVzZXJEYXRhLm5hbWU7XHJcbiAgICBhYm91dElucHV0LnZhbHVlID0gdXNlckRhdGEudGl0bGU7XHJcblxyXG59O1xyXG5cclxuY29uc3QgcG9wdXBBZGRQbGFjZSA9IG5ldyBQb3B1cFdpdGhGb3JtKCcucG9wdXAtYWRkRWxlbWVudCcsIChkYXRhKSA9PiB7XHJcbiAgICAvLyBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgY29uc3QgbmV3RWxlbWVudCA9IHtcclxuICAgICAgICBuYW1lOiBgJHtkYXRhLnBsYWNlTmFtZX1gLFxyXG4gICAgICAgIGxpbms6IGAke2RhdGEucGxhY2VMaW5rfWAsXHJcbiAgICB9O1xyXG4gICAgc2VjdGlvbi5hZGRJdGVtKGNyZWF0ZUNhcmQobmV3RWxlbWVudCkpO1xyXG59KTtcclxucG9wdXBBZGRQbGFjZS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuZWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5hZGRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuLy9lbGVtZW50cyBmdW5jdGlvbnNcclxuLy8gQGZ1bmNcclxuY29uc3QgY3JlYXRlQ2FyZCA9IChlbGVtZW50KSA9PiB7XHJcbiAgICBjb25zdCBjYXJkID0gbmV3IENhcmQoZWxlbWVudCwgY2FyZFNlbGVjdG9yLCB7XHJcbiAgICAgICAgaGFuZGxlQ2xpY2tDYXJkOiAoKSA9PiB7XHJcbiAgICAgICAgICAgIHBvcHVwUHJldmlld0ltYWdlLm9wZW4oZWxlbWVudC5saW5rLCBlbGVtZW50Lm5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgIH0pLmFkZEVsbWVudCgpO1xyXG4gICAgcmV0dXJuIGNhcmQ7XHJcbn07XHJcblxyXG5jb25zdCBwcmVwZW5kQ2FyZCA9IChlbGVtZW50KSA9PiB7XHJcbiAgICBjb25zdCBjYXJkID0gY3JlYXRlQ2FyZChlbGVtZW50KTtcclxuICAgIHNlY3Rpb24uYWRkSXRlbShjYXJkKVxyXG59O1xyXG5cclxuLy9wb3B1cCBldmVudHNMaXN0ZW5lcnNcclxuLy8gQGxpc3RlbnNcclxuXHJcbmVkaXRNb2RlTmFtZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGVkaXRQcm9maWxlKTtcclxuYWRkUGxhY2VCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvcGVuQ2FyZFBvcHVwKTtcclxuXHJcbmNvbnN0IHNlY3Rpb24gPSBuZXcgU2VjdGlvbih7XHJcbiAgICAgICAgcmVuZGVyZXI6IHByZXBlbmRDYXJkLFxyXG4gICAgICAgIGl0ZW1zOiBpbml0aWFsRWxlbWVudHMsXHJcbiAgICB9LFxyXG4gICAgZWxlbWVudExpc3QsXHJcbik7XHJcbnNlY3Rpb24ucmVuZGVySXRlbXMoKTsiXSwibmFtZXMiOlsiX193ZWJwYWNrX3JlcXVpcmVfXyIsInAiLCJGb3JtVmFsaWRhdG9yIiwic2V0dGluZ3MiLCJmb3JtRWxlbWVudCIsInRoaXMiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfZm9ybSIsIl9pbnB1dHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiX2J1dHRvbiIsInF1ZXJ5U2VsZWN0b3IiLCJpbnB1dCIsImVycm9yRWxlbWVudCIsImlkIiwidGV4dENvbnRlbnQiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImFkZCIsImNoZWNrVmFsaWRpdHkiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJldmVyeSIsInZhbGlkaXR5IiwidmFsaWQiLCJpc0Zvcm1WYWxpZCIsInJlbW92ZUF0dHJpYnV0ZSIsImRpc2FibGVkIiwidG9nZ2xlQnV0dG9uIiwiZm9yRWFjaCIsImFkZEV2ZW50TGlzdGVuZXIiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiZSIsInByZXZlbnREZWZhdWx0IiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiQ2FyZCIsImRhdGEiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVDbGlja0NhcmQiLCJfZWxlbWVudCIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlQ2xpY2tDYXJkIiwiZG9jdW1lbnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2VsZW1lbnRJbWFnZSIsIl9saWtlQnRuIiwiZXZ0IiwiX3RvZ2dsZUxpa2UiLCJfZGVsZXRlQnRuIiwiX2hhbmRsZUVsbWVudFJlbW92ZSIsInRhcmdldCIsInRvZ2dsZSIsIl9nZXRUZW1wbGF0ZSIsIl90aXRsZSIsImFsdCIsInNyYyIsIl9zZXRldmVudExpc3RlbmVycyIsIlNlY3Rpb24iLCJjb250YWluZXIiLCJyZW5kZXJlciIsIml0ZW1zIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsIml0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsIlBvcHVwIiwiUG9wdXBTZWxlY3RvciIsImtleSIsImNsb3NlIiwiY29udGFpbnMiLCJfcG9wdXBFbGVtZW50IiwiYmluZCIsIl9oYW5kbGVFc2NDbG9zZSIsIl9jbG9zZVBvcHVwT25SZW1vdGVDbGljayIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJQb3B1cFdpdGhGb3JtIiwiZm9ybVNlbGVjdG9yIiwic3VibWl0SGFuZGxlciIsInJlc2V0IiwiZm9ybUlucHV0VmFsdWVzIiwiX2lucHV0TGlzdCIsInZhbHVlIiwiX2dldElucHV0VmFsdWVzIiwiUG9wdXBXaXRoSW1hZ2UiLCJwb3B1cFNlbGVjdG9yIiwiaW1hZ2VFbG1lbnQiLCJfaW1hZ2VDYXB0aW9uIiwidGV4dCIsIlVzZXJJbmZvIiwidXNlck5hbWUiLCJ1c2VySm9iIiwiX3VzZXJOYW1lIiwiX3VzZXJKb2IiLCJ0aXRsZSIsImpvYiIsIm5hbWVJbnB1dCIsImFib3V0SW5wdXQiLCJlZGl0UG9wdXBGb3JtIiwiZWRpdFBvcHVwRm9ybUFkZFBsYWNlIiwiZWRpdE1vZGVOYW1lIiwiYWRkUGxhY2VCdG4iLCJlbGVtZW50TGlzdCIsImxvZ29JbWciLCJ0aGVwcm9maWxlSW1nIiwidmFsaWRhdGlvblNldHRpbmdzIiwibG9nbyIsInByb2ZpbGVJbWciLCJ1c2VySW5mbyIsImVkaXRGb3JtVmFsaWRhdG9yIiwiYWRkRm9ybVZhbGlkYXRvciIsInBvcHVwRWRpdFByb2ZpbGUiLCJzZXRVc2VySW5mbyIsInNldEV2ZW50TGlzdGVuZXJzIiwicG9wdXBQcmV2aWV3SW1hZ2UiLCJzZXRFdmVudExpc3RlbmVyIiwicG9wdXBBZGRQbGFjZSIsIm5ld0VsZW1lbnQiLCJwbGFjZU5hbWUiLCJwbGFjZUxpbmsiLCJzZWN0aW9uIiwiYWRkSXRlbSIsImNyZWF0ZUNhcmQiLCJlbmFibGVWYWxpZGF0aW9uIiwib3BlbiIsImFkZEVsbWVudCIsInVzZXJEYXRhIiwiZ2V0VXNlckluZm8iLCJjYXJkIiwicmVuZGVySXRlbXMiXSwic291cmNlUm9vdCI6IiJ9